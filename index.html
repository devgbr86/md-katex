<!DOCTYPE html>
<html lang="pt-BR">

<head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>Editor Markdown + KaTeX</title>

     <!-- Libs -->
     <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css">
     <script src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js"></script>
     <script src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js"></script>
     <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

     <style>
          * {
               margin: 0;
               padding: 0;
               box-sizing: border-box;
          }

          body {
               font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
               background: #2c2c2c;
               color: #d4d4d4;
               min-height: 100vh;
               display: flex;
               flex-direction: column;
               padding: 2rem;
          }

          header {
               text-align: center;
               margin-bottom: 2rem;
          }

          h1 {
               font-size: 1.75rem;
               font-weight: 600;
               color: #f5f5f5;
               letter-spacing: 0.5px;
               margin-bottom: 0.5rem;
          }

          .subtitle {
               font-size: 0.95rem;
               color: #a0a0a0;
          }

          main {
               flex: 1;
               display: flex;
               flex-direction: column;
               gap: 1.5rem;
               max-width: 1000px;
               width: 100%;
               margin: 0 auto;
          }

          .editor-container {
               flex: 1;
               display: flex;
               min-height: 0;
          }

          .panel {
               width: 100%;
               display: flex;
               flex-direction: column;
               background: #3a3a3a;
               border-radius: 10px;
               border: 1px solid #4a4a4a;
               box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
               overflow: hidden;
          }

          .panel-header {
               padding: 1rem 1.25rem;
               background: #424242;
               border-bottom: 1px solid #4a4a4a;
               font-size: 0.875rem;
               font-weight: 600;
               color: #c0c0c0;
               text-transform: uppercase;
               letter-spacing: 0.8px;
          }

          textarea {
               flex: 1;
               width: 100%;
               padding: 1.5rem;
               border: none;
               background: #333333;
               color: #e8e8e8;
               resize: none;
               font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
               font-size: 1rem;
               line-height: 1.7;
               outline: none;
          }

          textarea::placeholder {
               color: #707070;
          }

          .controls {
               display: flex;
               justify-content: center;
               gap: 1rem;
               padding: 1rem 0;
          }

          button {
               padding: 0.875rem 2.5rem;
               background: #4a4a4a;
               color: #e8e8e8;
               border: 1px solid #5a5a5a;
               border-radius: 8px;
               cursor: pointer;
               font-size: 1rem;
               font-weight: 500;
               transition: all 0.2s ease;
               box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
          }

          button:active {
               transform: translateY(1px);
               box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
          }

          footer {
               margin-top: 2rem;
               text-align: center;
               font-size: 0.875rem;
               color: #888;
               padding-top: 1.5rem;
               border-top: 1px solid #444;
          }

          footer a {
               color: #a0a0a0;
               text-decoration: none;
               border-bottom: 1px solid transparent;
          }

          @media (max-width: 1024px) {
               body {
                    padding: 1.5rem;
               }

               h1 {
                    font-size: 1.5rem;
               }

               .subtitle {
                    font-size: 0.875rem;
               }

               textarea {
                    font-size: 0.95rem;
               }
          }

          @media (max-width: 640px) {
               body {
                    padding: 1rem;
               }

               h1 {
                    font-size: 1.25rem;
               }

               .subtitle {
                    font-size: 0.8rem;
               }

               .panel-header {
                    padding: 0.875rem 1rem;
                    font-size: 0.8rem;
               }

               textarea {
                    padding: 1rem;
                    font-size: 0.9rem;
               }

               button {
                    padding: 0.75rem 2rem;
                    font-size: 0.9rem;
               }

               .panel {
                    border-radius: 8px;
               }
          }

          @media (max-width: 480px) {
               body {
                    padding: 0.75rem;
               }

               header {
                    margin-bottom: 1.5rem;
               }

               h1 {
                    font-size: 1.1rem;
               }

               .subtitle {
                    font-size: 0.75rem;
               }

               textarea {
                    padding: 0.875rem;
                    font-size: 0.85rem;
               }

               button {
                    padding: 0.625rem 1.5rem;
                    font-size: 0.85rem;
               }
          }
     </style>
</head>

<body>
     <header>
          <h1>Editor Markdown + KaTeX</h1>
          <p class="subtitle">Editor online com suporte a fórmulas matemáticas e exportação PDF</p>
     </header>

     <main>
          <div class="editor-container">
               <div class="panel">
                    <div class="panel-header">Editor</div>
                    <textarea id="editor" placeholder="Digite seu texto em Markdown...

Exemplos:
# Título
## Subtítulo

**negrito** e *itálico*

Fórmula inline: $E = mc^2$

Fórmula em bloco:
$$
\int_{-\infty}^{\infty} e^{-x^2} dx = \sqrt{\pi}
$$"></textarea>
               </div>
          </div>

          <div class="controls">
               <button id="exportPdf">Exportar PDF</button>
          </div>
     </main>

     <footer>
          <p>
               Editor combinando <strong>Marked.js</strong> e <strong>KaTeX.js</strong> para documentos técnicos e
               fórmulas matemáticas<br>
               <a href="https://github.com/devgbr86" target="_blank">github.com/devgbr86</a>
          </p>
     </footer>

     <script>
          const editor = document.getElementById("editor");
          const exportBtn = document.getElementById("exportPdf");

          exportBtn.addEventListener("click", () => {
               const markdown = editor.value;

               if (!markdown.trim()) {
                    alert("Digite algo no editor antes de exportar.");
                    return;
               }

               const html = marked.parse(markdown);
               const tempDiv = document.createElement("div");
               tempDiv.innerHTML = html;
               tempDiv.style.padding = "20px";
               tempDiv.style.fontFamily = "Arial, sans-serif";
               tempDiv.style.lineHeight = "1.6";
               tempDiv.style.color = "#000";

               renderMathInElement(tempDiv, {
                    delimiters: [
                         { left: "$$", right: "$$", display: true },
                         { left: "$", right: "$", display: false }
                    ],
                    throwOnError: false
               });

               const opt = {
                    margin: 0.5,
                    filename: "documento.pdf",
                    html2canvas: { scale: 2 },
                    jsPDF: { unit: "in", format: "a4", orientation: "portrait" }
               };

               html2pdf().from(tempDiv).set(opt).save();
          });
     </script>
</body>

</html>